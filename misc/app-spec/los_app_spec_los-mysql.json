{
  "kind": "AppSpec",
  "meta": {
    "id": "7347713d5b6e3d2b",
    "name": "los-mysql",
    "version": "1"
  },
  "roles": [
    100
  ],
  "packages": [
    {
      "name": "mysql57",
      "version": "5.7.18",
      "release": "1",
      "dist": "el7",
      "arch": "x64"
    },
    {
      "name": "los-mysql-keeper",
      "version": "0.1.0-dev",
      "release": "6",
      "dist": "el7",
      "arch": "x64"
    }
  ],
  "executors": [
    {
      "name": "main",
      "exec_start": "if pidof los-mysql-keeper; then\n    exit 0\nfi\n\nmkdir -p /home/action/apps/mysql57/\nrsync -av {{.lpm_prefix_mysql57}}/* /home/action/apps/mysql57/\n\nmkdir -p /home/action/apps/los-mysql-keeper/\nrsync -av {{.lpm_prefix_los_mysql_keeper}}/* /home/action/apps/los-mysql-keeper/\n\n/home/action/apps/los-mysql-keeper/bin/los-mysql-keeper \u003e /dev/null 2\u003e\u00261 \u0026\n\nsleep 1\nexit 0\n",
      "exec_stop": "killall los-mysql-keeper\nkillall mysql57d",
      "plan": {
        "on_tick": 60
      }
    }
  ],
  "service_ports": [
    {
      "name": "mysql",
      "box_port": 3306
    }
  ],
  "configurator": {
    "name": "cfg/los-mysql",
    "fields": [
      {
        "name": "db_name",
        "title": "Database Name",
        "type": 1,
        "default": "dbaction",
        "validates": [
          {
            "key": "[a-z]{1}[a-z0-9_]{2,30}"
          }
        ]
      },
      {
        "name": "db_auth",
        "title": "Database Password",
        "type": 1,
        "validates": [
          {
            "key": "[a-zA-Z0-9_]{20,50}",
            "value": "20 ~ 50 length of letters, numbers, and the underscore character"
          }
        ]
      },
      {
        "name": "db_user",
        "title": "Database User",
        "type": 1,
        "default": "dbuser",
        "validates": [
          {
            "key": "[a-z]{1}[a-z0-9_]{3,19}"
          }
        ]
      }
    ]
  }
}
