{
  "kind": "AppSpec",
  "meta": {
    "id": "sysinner-mysql-x1",
    "name": "MySQL Inner x1",
    "version": "22"
  },
  "roles": [
    100,
    101
  ],
  "packages": [
    {
      "name": "mysql57",
      "version": "5.7.20",
      "release": "2",
      "dist": "el7",
      "arch": "x64"
    },
    {
      "name": "sysinner-mysql",
      "version": "0.2.2",
      "release": "2",
      "dist": "el7",
      "arch": "x64"
    }
  ],
  "executors": [
    {
      "name": "sysinner-mysql-x1",
      "exec_start": "if pidof sysinner-mysql; then\n    exit 0\nfi\n\nmkdir -p /home/action/apps/mysql57/\nrsync -av {{.inpack_prefix_mysql57}}/* /home/action/apps/mysql57/\n\nmkdir -p /home/action/apps/sysinner-mysql/\nrsync -av {{.inpack_prefix_sysinner_mysql}}/* /home/action/apps/sysinner-mysql/\n\n/home/action/apps/sysinner-mysql/bin/sysinner-mysql -log_dir=/home/action/apps/sysinner-mysql/log -minloglevel=1 -logtolevels=true \u003e /dev/null 2\u003e\u00261 \u0026\n\nsleep 1\nexit 0\n",
      "exec_stop": "killall sysinner-mysql\nkillall mysql57d",
      "priority": 4,
      "plan": {
        "on_tick": 60
      }
    }
  ],
  "service_ports": [
    {
      "name": "mysql",
      "box_port": 3306
    }
  ],
  "configurator": {
    "name": "cfg/sysinner-mysql",
    "fields": [
      {
        "name": "db_name",
        "title": "Database Name",
        "type": 1,
        "default": "dbaction",
        "auto_fill": "defval"
      },
      {
        "name": "db_auth",
        "title": "Database Password",
        "type": 1,
        "auto_fill": "hexstr_32"
      },
      {
        "name": "db_user",
        "title": "Database User",
        "type": 1,
        "default": "dbuser",
        "auto_fill": "defval"
      },
      {
        "name": "memory_usage_limit",
        "title": "Memory Usage In Percentage (will allocating 10% ~ 100% Memory Size to this Instance)",
        "prompt": "Range in 10 ~ 100",
        "type": 1,
        "default": "20"
      }
    ]
  },
  "exp_res": {
    "cpu_min": 100,
    "mem_min": 67108864,
    "vol_min": 209715200
  }
}